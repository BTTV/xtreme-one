var xtreme_widget_partial=[];var xtreme_widget_del_queue=[];xtreme_widget_del_queue_delta=0;xtreme_widget_del_queue_current=0;var xtreme_classes=[".x-content",".x-switcher",".x-rows",".x-columns",".x-image-url",".x_itemsize",".x-social-icons",".x-social-title",".x-social-url",".x-thumbnail"];(function(a){a(document).ready(function(){a(".x-content").live("change",function(){switch(this.value){case"xtreme_excerpt":a("."+this.id+" .excerpt_length").show();a("."+this.id+" .excerpt_more").show();a("."+this.id+" .excerpt_morelink_text").show();a("."+this.id+" .excerpt_show_tags").show();break;case"excerpt":a("."+this.id+" .excerpt_length").hide();a("."+this.id+" .excerpt_more").hide();a("."+this.id+" .excerpt_show_tags").hide();a("."+this.id+" .excerpt_morelink_text").show();break;case"title_only":a("."+this.id+" .excerpt_length").hide();a("."+this.id+" .excerpt_more").hide();a("."+this.id+" .excerpt_show_tags").hide();break;case"nothing":a("."+this.id+" .excerpt_length").hide();a("."+this.id+" .excerpt_more").hide();a("."+this.id+" .excerpt_show_tags").hide();break;case"both":a("."+this.id+" .excerpt_length").show();a("."+this.id+" .excerpt_more").show();a("."+this.id+" .excerpt_show_tags").hide();break;case"content":a("."+this.id+" .excerpt_length").hide();a("."+this.id+" .excerpt_more").hide();a("."+this.id+" .excerpt_morelink_text").hide();a("."+this.id+" .excerpt_show_tags").hide();break}});a(".x-switcher").live("change",function(){if(this.checked==true){a("."+this.id).show()}else{a("."+this.id).hide()}});a(".x-rows").live("change",function(){var e=a(this).attr("id");var f=a("#"+e).val();a("."+e).hide();for(var g=0;g<f;g++){a("."+e+"-"+g).show()}});a(".x-columns").live("change",function(){var g=a(this).attr("id");var e=a("#"+g).val();a("."+g).hide();for(var f=1;f<=e;f++){a("."+g+"-"+(f)).show()}});a(".x_itemsize").live("change",function(){if(this.value=="value"){a("."+this.id).show()}else{a("."+this.id).hide()}});a(".x-image-url").live("change",function(){if(this.value=="userdef"){a(this).parent().next(".x-image-url-content").first().show()}else{a(this).parent().next(".x-image-url-content").first().hide()}});a(".x-social-icons").live("change",function(){if(this.value=="none"){a(this).parent().next(".x-social-icons-content").first().hide()}else{a(this).parent().next(".x-social-icons-content").first().show()}});a(".x-social-title").live("change",function(){if(this.value=="userdef"){a(this).parent().next(".x-social-title-content").first().show()}else{a(this).parent().next(".x-social-title-content").first().hide()}});a(".x-social-url").live("change",function(){if(this.value=="userdef"){a(this).parent().next(".x-social-url-content").first().show()}else{a(this).parent().next(".x-social-url-content").first().hide()}});a(".x-thumbnail").live("change",function(){if(this.checked==true){a("."+this.id).show()}else{a("."+this.id).hide()}});a("body").bind("renumber_text_grids_autop",function(g,f){a('li input[type="checkbox"]',f).each(function(e,h){a(h).val(e)})});a("body").bind("init_text_grids",function(g,f){a(".x-textarea-grid",f).sortable({placeholder:"x-textarea-grid-paceholder",update:function(e,h){a("body").trigger("renumber_text_grids_autop",a(this).closest(".widget"))}});a(".x-textarea-grid",f).disableSelection()});a("body").trigger("init_text_grids",document);a(".x-textcolumns").live("change",function(){var e=a(".x-textarea-grid",a(this).closest(".widget"));for(i=2;i<6;i++){a(e).removeClass("columns-"+i)}a(e).addClass("columns-"+a(this).val());a(".x-textrows",a(this).closest(".widget")).trigger("change")});a(".x-textrows").live("change",function(){var h=a(".x-textarea-grid",a(this).closest(".widget"));var f=a(".x-textcolumns",a(this).closest(".widget")).val()*a(this).val();var e=a("li",h);if(e.length!=f){if(e.length<f){var k=a("li:first",h);for(i=0;i<f-e.length;i++){a(h).append(k.clone());a("li:last",h).removeClass("none-empty").removeAttr("title");a("li:last textarea",h).val("");a("li:last input.description",h).val("");a('li:last input[type="checkbox"]',h).removeAttr("checked")}}else{for(i=0;i<e.length-f;i++){a("li:last",h).remove()}}}a(".x-distribution",a(this).closest(".widget")).addClass("hidden");a(".x-distribution-"+a(".x-textcolumns",a(this).closest(".widget")).val(),a(this).closest(".widget")).removeClass("hidden")});a(".x-textarea-grid li a.edit").live("click",function(e){e.preventDefault();if(a("textarea",a(this).closest("li")).is(":visible")){a(this).addClass("ui-icon-pencil").removeClass("ui-icon-close");a(this).closest(".x-textarea-grid").disableSelection().sortable("option","disabled",false);a("li",a(this).closest(".x-textarea-grid")).show();a(this).closest("li").removeClass("x-textarea-grid-full");a(this).closest(".x-textarea-grid").removeClass("x-textarea-grid-full");a("textarea, p",a(this).closest("li")).hide();if(a("textarea",a(this).closest("li")).val().length){a(this).closest("li").addClass("none-empty")}else{a(this).closest("li").removeClass("none-empty")}a(this).closest("li").attr({title:a("input.description",a(this).closest("li")).val()})}else{a(this).removeClass("ui-icon-pencil").addClass("ui-icon-close");a(this).closest(".x-textarea-grid").enableSelection().sortable("option","disabled",true);a("li",a(this).closest(".x-textarea-grid")).hide();a(this).closest("li").show().addClass("x-textarea-grid-full");a(this).closest(".x-textarea-grid").addClass("x-textarea-grid-full");a("textarea, p",a(this).closest("li")).show();a(this).closest("li").attr({title:""})}});for(j=0;j<xtreme_classes.length;j++){a(xtreme_classes[j]).trigger("change")}a("body").bind("check_portlet_content",function(g,f){if(a(f).sortable("toArray").length==0){a(f).parent().find(".x-portlet-wrapper-empty").show();a(f).css({"padding-top":"20px"})}else{a(f).parent().find(".x-portlet-wrapper-empty").hide();a(f).css({"padding-top":"0px"})}});a("body").bind("init_portlet",function(l,g){a(".x-portlet-column",g).each(function(e,m){a(m).sortable({containment:a(m).hasClass("x-portlet-dest")?"parent":false,delay:50,connectWith:a(m).parent().attr("class").replace(/x\-portlet\-wrapper /,".")+" .x-portlet-column",receive:function(n,o){a(this).css({"padding-top":"0px"});a(this).parent().find(".x-portlet-wrapper-empty").hide()}})});a(".x-portlet-item",g).each(function(e,m){if(!a(m).hasClass("ui-widget")){a(m).addClass("ui-widget ui-widget-content ui-helper-clearfix ui-corner-all").find(".x-portlet-item-header").addClass("ui-widget-header ui-corner-all").prepend("<span class='ui-icon ui-icon-plusthick'></span>")}});a(".x-portlet-item-content",g).hide();a(".x-portlet-column",g).each(function(e,m){a("body").trigger("check_portlet_content",a(m))});if(g==document){a(".widget").each(function(e,n){var p=a(n).closest(".widgets-sortables").attr("id");var m=a(n).closest(".widget").find('input[name="id_base"]').val();var o=(a(n).closest(".widget").find('input[name="multi_number"]').val()||a(n).closest(".widget").find('input[name="widget_number"]').val());a(n).find('input[name*="xtreme_burn_it_sidebar"]').val(p);a(n).find('input[name*="xtreme_burn_it_id_base"]').val(m);a(n).find('input[name*="xtreme_burn_it_widget_number"]').val(o)})}else{var k=a(g).closest(".widgets-sortables").attr("id");var f=a(g).closest(".widget").find('input[name="id_base"]').val();var h=(a(g).closest(".widget").find('input[name="multi_number"]').val()||a(g).closest(".widget").find('input[name="widget_number"]').val());a(g).closest(".widget").find('input[name*="xtreme_burn_it_sidebar"]').val(k);a(g).closest(".widget").find('input[name*="xtreme_burn_it_id_base"]').val(f);a(g).closest(".widget").find('input[name*="xtreme_burn_it_widget_number"]').val(h)}});a("body").trigger("init_portlet",document);a(".x-portlet-item-header .ui-icon").live("click",function(){a(this).toggleClass("ui-icon-minusthick").toggleClass("ui-icon-plusthick");a(this).parents(".x-portlet-item:first").find(".x-portlet-item-content").toggle()});a(".x-portlet-item-del").live("click",function(e){e.preventDefault();col=a(this).parent().parent().parent().parent();a(this).parent().parent().parent().remove();a("body").trigger("check_portlet_content",col)});a(".x-portlet-removeall").live("click",function(e){e.preventDefault();a(this).parent().prev(".x-portlet-wrapper").first().find(".x-portlet-column").html("");a("body").trigger("check_portlet_content",a(this).parent().prev(".x-portlet-wrapper").first().find(".x-portlet-column"))});a(".x-portlet-help").live("click",function(e){e.preventDefault();a(this).parent().next(".x-portlet-help-content").toggle()});a("body").append('<div id="x-portlet-editing" style="display:none"></div>');a("body").append('<div id="x-portlet-expression" style="display:none"></div>');a(".widget-control-save").live("click",function(){a("#x-portlet-editing").hide()});a(".x-portlet-edit").live("click",function(h){h.preventDefault();var e=a(this);e.prev(".ajax-feedback").css({visibility:"visible"});var f=[];e.closest(".widget-content").find('.x-portlet-dest input[name*="portlet_id"]').each(function(m,n){f.push(a(n).val())});var l=e.closest(".widget-content").find(".x-portlet-wrapper:first").offset();var k=parseInt(e.closest(".widget-content").find(".x-portlet-wrapper:first").width());var g=parseInt(e.closest(".widget-content").find('.x-portlet-wrapper input[name="x-portlet-ajax-width"]').val());a.post(ajaxurl,{action:e.closest(".widget-content").find('.x-portlet-wrapper input[name="x-portlet-ajax-action"]').val(),widget:e.closest(".widget").attr("id"),portlet_id:f,widget_number:e.closest(".widget").find(".multi_number").val()||e.closest(".widget").find(".widget_number").val(),"widget-id":e.closest(".widget").find(".widget-id").val(),id_base:e.closest(".widget").find(".id_base").val()},function(m){if(a("body").hasClass("rtl")){a("#x-portlet-editing").html(m).show().css({position:"absolute",width:g+"px",top:l.top-25+"px",left:l.left+(k+50)+"px"})}else{a("#x-portlet-editing").html(m).show().css({position:"absolute",width:g+"px",top:l.top-25+"px",left:l.left-(g+25)+"px"})}a("body").trigger("init_portlet",a("#x-portlet-editing"));for(j=0;j<xtreme_classes.length;j++){a(xtreme_classes[j],a("#x-portlet-editing")).trigger("change")}e.prev(".ajax-feedback").css({visibility:"hidden"})})});a("#x-portlet-editing-close, .widget-control-close, .widget-action, .widget-control-remove").live("click",function(e){e.preventDefault();a("#x-portlet-editing").hide();a("#x-portlet-expression").hide();if(a("body").hasClass("iframe")){a("form").show()}});function d(g){var h=new Array();if(g.data){var f=g.data.split("&");for(i=0;i<f.length;i++){var e=f[i].split("=");h[e[0]]=e[1]}}return h}if(!a("body").hasClass("widgets-php")){a.ajaxPrefilter(function(e){var f=d(e);if(f.action=="save-widget"){e.data=e.data.replace(/action=save\-widget/,"action=xcontentwidget-save-widget");e.data+="&post_id="+a("input[name='post_id']").val()}else{if(f.action=="widgets-order"){e.data=e.data.replace(/action=widgets\-order/,"action=xcontentwidget-widgets-order")}}})}a(document).ajaxSend(function(h,g,e){var f=d(e);if(f.action=="save-widget"||f.action=="xtreme_post_social_selector"){xtreme_widget_partial.push('div[id$="'+f["widget-id"]+'"]')}});a(document).ajaxSuccess(function(h,g,e){var f=d(e);if(f.action=="save-widget"||f.action=="xtreme_post_social_selector"){for(i=0;i<xtreme_widget_partial.length;i++){for(j=0;j<xtreme_classes.length;j++){a(xtreme_classes[j],a(xtreme_widget_partial[i])).trigger("change")}a('.xtreme-widget-burn-it input[type="checkbox"]').trigger("change");a("body").trigger("init_portlet",a(xtreme_widget_partial[i]));a("body").trigger("convert_checkboxes",a(xtreme_widget_partial[i]));a("body").trigger("init_text_grids",a(xtreme_widget_partial[i]))}xtreme_widget_partial=[];if(xtreme_widget_del_queue.length){wpWidgets.save(a(xtreme_widget_del_queue.pop()),1,0,0,0);xtreme_widget_del_queue_current+=xtreme_widget_del_queue_delta;a("#dialog-confirm .progressbar .widget .widget").css("width",Math.round(xtreme_widget_del_queue_current)+"%");a("#dialog-confirm .progressbar .widget .widget div").html(Math.round(xtreme_widget_del_queue_current)+"&nbsp;%")}else{a("#dialog-confirm p").show();a("#dialog-confirm .progressbar").hide();a("#dialog-confirm .progressbar .widget .widget div").html("0&nbsp;%");a("#dialog-confirm .progressbar .widget .widget").css("width","0%");a(".ui-dialog-buttonpane").show();a("#dialog-confirm").dialog("close")}}});a("#xtreme-admin-burnings .xtreme-admin-burnings-item").each(function(e,f){a("#"+a(f).html()+" .sidebar-description").append(a(f).next("div"))});a("#xtreme-admin-burnings").remove();a('.xtreme-widget-burn-it input[id$="xtreme_burn_it"]').live("change",function(){if(a(this).attr("checked")){a(this).closest(".widget").find(".widget-top").addClass("x-burned-widget");a(this).parent().next("p").show()}else{a(this).parent().next("p").hide();a(this).closest(".widget").find(".widget-top").removeClass("x-burned-widget")}}).trigger("change");a(".x-duplicate a").live("click",function(e){e.preventDefault();var o=a(this).closest(".widget");var f=o.clone();var m=o.find("input.id_base").val();var q=o.find(".multi_number").val()||o.find("input.widget_number").val();var s=a("#available-widgets").find('input[value="'+m+'"]').closest(".widget");var t=s.find("input.add_new").val(),l=s.find("input.multi_number").val(),g=s.attr("id"),r=o.closest(".widgets-sortables").attr("id");if("single"==t){return}f.find("input.add_new").val(t);f.find("input.multi_number").val(l);var p=f.wrap("<div/>").parent().html();var k=new RegExp(m+"-"+q,"g");var h=new RegExp(m+"\\["+q+"\\]","g");p=p.replace(k,m+"-"+l);p=p.replace(h,m+"["+l+"]");l++;s.find("input.multi_number").val(l);o.after(p);wpWidgets.save(o.next(".widget"),0,0,1);o.next(".widget").find("input.add_new").val("")});var c=a("#x-duplicate").remove();c.attr("id","");a(".widget").find(".widget-control-actions:last").append(c.clone());var b=a("#x-erase").remove();b.show().attr("id","");a("#widgets-right .sidebar-name h3,#widgets-left .sidebar-name:last h3").prepend(b.clone());a(".sidebar-name h3>.x-erase").click(function(f){f.preventDefault();a(this).parent().trigger("click");var e=a(this).closest(".widgets-holder-wrap").find(".widgets-sortables .widget").toArray();a("#dialog-confirm").dialog({resizable:false,height:190,modal:true,buttons:[{text:xtreme_widgets_config_l10n.erase_button,click:function(){xtreme_widget_del_queue=e;if(xtreme_widget_del_queue.length){xtreme_widget_del_queue_delta=100/xtreme_widget_del_queue.length;xtreme_widget_del_queue_current=xtreme_widget_del_queue_delta;a("#dialog-confirm p").hide();a("#dialog-confirm .progressbar .widget .widget").css("width",Math.round(xtreme_widget_del_queue_current)+"%");a("#dialog-confirm .progressbar .widget .widget div").html(Math.round(xtreme_widget_del_queue_current)+"&nbsp;%");a("#dialog-confirm .progressbar").show();a(".ui-dialog-buttonpane").hide();wpWidgets.save(a(xtreme_widget_del_queue.pop()),1,0,0,0)}else{a(this).dialog("close")}}},{text:xtreme_widgets_config_l10n.cancel_button,click:function(){a(this).dialog("close")}}]})});a("form").attr("autocomplete","off")})})(jQuery);